From 5f51beb9b11de50d996cd4f827eb7a7de56b4a90 Mon Sep 17 00:00:00 2001
From: Robert Nelson <robertcnelson@gmail.com>
Date: Mon, 25 Aug 2014 11:49:48 -0500
Subject: [PATCH 16/17] cape: lcd-4dcape-43 & lcd-4dcape-43t

Signed-off-by: Robert Nelson <robertcnelson@gmail.com>
---
 arch/arm/boot/dts/am335x-bone-lcd-4dcape-43.dtsi  | 62 ++++++++++++++++++++++
 arch/arm/boot/dts/am335x-bone-lcd-4dcape-43t.dtsi | 63 +++++++++++++++++++++++
 arch/arm/boot/dts/am335x-boneblack.dts            |  6 +++
 3 files changed, 131 insertions(+)
 create mode 100644 arch/arm/boot/dts/am335x-bone-lcd-4dcape-43.dtsi
 create mode 100644 arch/arm/boot/dts/am335x-bone-lcd-4dcape-43t.dtsi

diff --git a/arch/arm/boot/dts/am335x-bone-lcd-4dcape-43.dtsi b/arch/arm/boot/dts/am335x-bone-lcd-4dcape-43.dtsi
new file mode 100644
index 0000000..3ccfcf5
--- /dev/null
+++ b/arch/arm/boot/dts/am335x-bone-lcd-4dcape-43.dtsi
@@ -0,0 +1,62 @@
+/*
+ * Copyright (C) 2012 Texas Instruments Incorporated - http://www.ti.com/
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+
+/ {
+	gpio_keys {
+		compatible = "gpio-keys";
+		pinctrl-names = "default";
+		pinctrl-0 = <&lcd4_01_00a2_keymap_pins>;
+
+		#address-cells = <1>;
+		#size-cells = <0>;
+
+		button@1 {
+			debounce_interval = <50>;
+			linux,code = <105>;
+			label = "left";
+			gpios = <&gpio1 16 0x1>;
+			gpio-key,wakeup;
+			autorepeat;
+		};
+		button@2 {
+			debounce_interval = <50>;
+			linux,code = <106>;
+			label = "right";
+			gpios = <&gpio1 17 0x1>;
+			gpio-key,wakeup;
+			autorepeat;
+		};
+		button@3 {
+			debounce_interval = <50>;
+			linux,code = <103>;
+			label = "up";
+			gpios = <&gpio1 19 0x1>;
+			gpio-key,wakeup;
+			autorepeat;
+		};
+		button@4 {
+			debounce_interval = <50>;
+			linux,code = <108>;
+			label = "down";
+			gpios = <&gpio3 16 0x1>;
+			gpio-key,wakeup;
+			autorepeat;
+		};
+		button@5 {
+			debounce_interval = <50>;
+			linux,code = <28>;
+			label = "enter";
+			gpios = <&gpio0 15 0x1>;
+			gpio-key,wakeup;
+		};
+	};
+};
+
+#include "am335x-bone-lcd-led-gpio1-28.dtsi"
+#include "am335x-bone-lcd-gpio-backlight-gpio1-18.dtsi"
+#include "am335x-bone-lcd4.dtsi"
diff --git a/arch/arm/boot/dts/am335x-bone-lcd-4dcape-43t.dtsi b/arch/arm/boot/dts/am335x-bone-lcd-4dcape-43t.dtsi
new file mode 100644
index 0000000..99c7cd3
--- /dev/null
+++ b/arch/arm/boot/dts/am335x-bone-lcd-4dcape-43t.dtsi
@@ -0,0 +1,63 @@
+/*
+ * Copyright (C) 2012 Texas Instruments Incorporated - http://www.ti.com/
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+
+/ {
+	gpio_keys {
+		compatible = "gpio-keys";
+		pinctrl-names = "default";
+		pinctrl-0 = <&lcd4_01_00a2_keymap_pins>;
+
+		#address-cells = <1>;
+		#size-cells = <0>;
+
+		button@1 {
+			debounce_interval = <50>;
+			linux,code = <105>;
+			label = "left";
+			gpios = <&gpio1 16 0x1>;
+			gpio-key,wakeup;
+			autorepeat;
+		};
+		button@2 {
+			debounce_interval = <50>;
+			linux,code = <106>;
+			label = "right";
+			gpios = <&gpio1 17 0x1>;
+			gpio-key,wakeup;
+			autorepeat;
+		};
+		button@3 {
+			debounce_interval = <50>;
+			linux,code = <103>;
+			label = "up";
+			gpios = <&gpio1 19 0x1>;
+			gpio-key,wakeup;
+			autorepeat;
+		};
+		button@4 {
+			debounce_interval = <50>;
+			linux,code = <108>;
+			label = "down";
+			gpios = <&gpio3 16 0x1>;
+			gpio-key,wakeup;
+			autorepeat;
+		};
+		button@5 {
+			debounce_interval = <50>;
+			linux,code = <28>;
+			label = "enter";
+			gpios = <&gpio0 15 0x1>;
+			gpio-key,wakeup;
+		};
+	};
+};
+
+#include "am335x-bone-lcd-led-gpio1-28.dtsi"
+#include "am335x-bone-lcd-gpio-backlight-gpio1-18.dtsi"
+#include "am335x-bone-ti-tscadc-4-wire.dtsi"
+#include "am335x-bone-lcd4.dtsi"
diff --git a/arch/arm/boot/dts/am335x-boneblack.dts b/arch/arm/boot/dts/am335x-boneblack.dts
index 8e4b848..99ea707 100644
--- a/arch/arm/boot/dts/am335x-boneblack.dts
+++ b/arch/arm/boot/dts/am335x-boneblack.dts
@@ -46,6 +46,12 @@
 #include "am335x-boneblack-nxp-hdmi-audio.dtsi"
 
 /* Capes */
+/* http://elinux.org/4D_4.3_LCD_CAPE */
+/* 4DCAPE-43 (Non Touch version): */
+/* #include "am335x-bone-lcd-4dcape-43.dtsi" */
+/* 4DCAPE-43T (Resistive Touch version): */
+/* #include "am335x-bone-lcd-4dcape-43t.dtsi" */
+
 /* http://elinux.org/CircuitCo:Audio_Cape_RevB */
 /* Pins: P9.24, P9.28, P9.29, P9.31, P9.30 */
 /* #include "am335x-bone-audio.dtsi" */
-- 
2.1.0.rc1

