From 0588696f9103d4b4c2552fb515fdf133a9752b07 Mon Sep 17 00:00:00 2001
From: Robert Nelson <robertcnelson@gmail.com>
Date: Mon, 25 Aug 2014 10:59:50 -0500
Subject: [PATCH 15/17] am335x-bone-common: pinmux cryptocape

Signed-off-by: Robert Nelson <robertcnelson@gmail.com>
---
 arch/arm/boot/dts/am335x-bone-common-pinmux.dtsi |  7 +++++
 arch/arm/boot/dts/am335x-bone-crypto-00a0.dtsi   | 36 ++++++++++++++++++++++++
 arch/arm/boot/dts/am335x-bone.dts                |  7 ++++-
 arch/arm/boot/dts/am335x-boneblack.dts           |  7 ++++-
 4 files changed, 55 insertions(+), 2 deletions(-)
 create mode 100644 arch/arm/boot/dts/am335x-bone-crypto-00a0.dtsi

diff --git a/arch/arm/boot/dts/am335x-bone-common-pinmux.dtsi b/arch/arm/boot/dts/am335x-bone-common-pinmux.dtsi
index 50ef1c1..2b53839 100644
--- a/arch/arm/boot/dts/am335x-bone-common-pinmux.dtsi
+++ b/arch/arm/boot/dts/am335x-bone-common-pinmux.dtsi
@@ -53,6 +53,13 @@
 		>;
 	};
 
+	cape_crypto_pins: pinmux_cape_crypto_pins {
+		pinctrl-single,pins = <
+			0x044 0x17	/* gpio1_17 FAST | OUTPUT | PULLUP | MODE7 */
+			0x034 0x2F	/* gpio1_13 FAST | INPUT | PULLDOWN | MODE7 */
+		>;
+	};
+
 	clkout2_pin: pinmux_clkout2_pin {
 		pinctrl-single,pins = <
 			0x1b4 (PIN_OUTPUT_PULLDOWN | MUX_MODE3)	/* xdma_event_intr1.clkout2 */
diff --git a/arch/arm/boot/dts/am335x-bone-crypto-00a0.dtsi b/arch/arm/boot/dts/am335x-bone-crypto-00a0.dtsi
new file mode 100644
index 0000000..728b1a4
--- /dev/null
+++ b/arch/arm/boot/dts/am335x-bone-crypto-00a0.dtsi
@@ -0,0 +1,36 @@
+/*
+ * Copyright (C) 2012 Texas Instruments Incorporated - http://www.ti.com/
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+
+/*
+ * FIXME: gpio
+ * (cape_crypto_pins)
+ * atmega_rst@1 {
+ * 	label = "atmega_rst";
+ * 	gpio = <&gpio1 17 0x00>;
+ * };
+ *
+ * ataes132_auth@2 {
+ * 	label = "test_input";
+ * 	gpio = <&gpio1 13 0x00>;
+ * };
+ */
+
+&i2c2 {
+	ds1307@68 {
+		compatible = "ds1307";
+		reg = <0x68>;
+	};
+
+	tpm_i2c_atmel@29 {
+		compatible = "tpm_i2c_atmel";
+		reg = <0x29>;
+	};
+};
+
+/* uart4: P9.11, P9.13 */
+#include "am335x-bone-ttyO4.dtsi"
diff --git a/arch/arm/boot/dts/am335x-bone.dts b/arch/arm/boot/dts/am335x-bone.dts
index f8f869b..e64fed5 100644
--- a/arch/arm/boot/dts/am335x-bone.dts
+++ b/arch/arm/boot/dts/am335x-bone.dts
@@ -65,4 +65,9 @@
 /* http://elinux.org/CircuitCo:RTC_Cape */
 /* i2c1: P9.17, P9.18 */
 /* gpio: P8.26 (mfp: wakeup) */
-/* #include "am335x-bone-rtc-01-00a1.dtsi" */
\ No newline at end of file
+/* #include "am335x-bone-rtc-01-00a1.dtsi" */
+
+/* http://elinux.org/Cryptotronix:CryptoCape */
+/* uart4: P9.11, P9.13 */
+/* gpio: gpio1 13 gpio1 17 (gpio NOT IMPLEMENTED YET) */
+/* #include "am335x-bone-crypto-00a0.dtsi" */
diff --git a/arch/arm/boot/dts/am335x-boneblack.dts b/arch/arm/boot/dts/am335x-boneblack.dts
index 72db8f9..8e4b848 100644
--- a/arch/arm/boot/dts/am335x-boneblack.dts
+++ b/arch/arm/boot/dts/am335x-boneblack.dts
@@ -64,4 +64,9 @@
 /* http://elinux.org/CircuitCo:RTC_Cape */
 /* i2c1: P9.17, P9.18 */
 /* gpio: P8.26 (mfp: wakeup) */
-/* #include "am335x-bone-rtc-01-00a1.dtsi" */
\ No newline at end of file
+/* #include "am335x-bone-rtc-01-00a1.dtsi" */
+
+/* http://elinux.org/Cryptotronix:CryptoCape */
+/* uart4: P9.11, P9.13 */
+/* gpio: gpio1 13 gpio1 17 (gpio NOT IMPLEMENTED YET) */
+/* #include "am335x-bone-crypto-00a0.dtsi" */
-- 
2.1.0.rc1

