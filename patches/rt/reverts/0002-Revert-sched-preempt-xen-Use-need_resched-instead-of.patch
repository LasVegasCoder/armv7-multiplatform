From bc69b943a93ff392d888bcaa200893bf79a16c2d Mon Sep 17 00:00:00 2001
From: Robert Nelson <robertcnelson@gmail.com>
Date: Tue, 27 Oct 2015 18:34:22 -0500
Subject: [PATCH 2/4] Revert "sched/preempt, xen: Use need_resched() instead of
 should_resched()"

This reverts commit d906a24a7ab60868a191c25e437f92f48948b5ca.

Signed-off-by: Robert Nelson <robertcnelson@gmail.com>
---
 drivers/xen/preempt.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/xen/preempt.c b/drivers/xen/preempt.c
index 08cb419..a1800c1 100644
--- a/drivers/xen/preempt.c
+++ b/drivers/xen/preempt.c
@@ -31,7 +31,7 @@ EXPORT_SYMBOL_GPL(xen_in_preemptible_hcall);
 asmlinkage __visible void xen_maybe_preempt_hcall(void)
 {
 	if (unlikely(__this_cpu_read(xen_in_preemptible_hcall)
-		     && need_resched())) {
+		     && should_resched())) {
 		/*
 		 * Clear flag as we may be rescheduled on a different
 		 * cpu.
-- 
2.6.1

